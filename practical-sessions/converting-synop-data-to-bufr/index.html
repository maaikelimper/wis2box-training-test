
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="WIS2 in a box (wis2box) is a Free and Open Source (FOSS) Reference Implementation of a WMO WIS2 Node. The project provides a plug and play toolset to ingest, process, and publish weather/climate/water data using standards-based approaches in alignment with the WIS2 principles. wis2box also provides access to all data in the WIS2 network. wis2box is designed to have a low barrier to entry for data providers, providing enabling infrastructure and services for data discovery, access, and visualization.">
      
      
        <meta name="author" content="World Meteorological Organization">
      
      
        <link rel="canonical" href="https://maaikelimper.github.io/wis2box-training-test/practical-sessions/converting-synop-data-to-bufr/">
      
      
        <link rel="prev" href="../configuring-station-metadata/">
      
      
        <link rel="next" href="../converting-csv-data-to-bufr/">
      
      
      <link rel="icon" href="https://public.wmo.int/sites/all/themes/wmo/favicon.ico">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.2">
    
    
      
        <title>Converting SYNOP data to BUFR - WIS2 in a box training</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.50c56a3b.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/css/custom.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#converting-synop-data-to-bufr" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="WIS2 in a box training" class="md-header__button md-logo" aria-label="WIS2 in a box training" data-md-component="logo">
      
  <img src="../../assets/img/wmo-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            WIS2 in a box training
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Converting SYNOP data to BUFR
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Select language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7 1.62-4.33L19.12 17h-3.24Z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="./" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../es/practical-sessions/converting-synop-data-to-bufr/" hreflang="es" class="md-select__link">
              Espa√±ol
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="WIS2 in a box training" class="md-nav__button md-logo" aria-label="WIS2 in a box training" data-md-component="logo">
      
  <img src="../../assets/img/wmo-logo.png" alt="logo">

    </a>
    WIS2 in a box training
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Practical sessions
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Practical sessions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../connecting-to-wis2-over-mqtt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Connecting to WIS2 over MQTT
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../accessing-your-student-vm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Accessing your student VM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../initializing-wis2box/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Initializing wis2box
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuring-wis2-discovery-metadata/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuring WIS2 discovery metadata
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuring-station-metadata/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuring station metadata
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Converting SYNOP data to BUFR
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Converting SYNOP data to BUFR
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparation" class="md-nav__link">
    <span class="md-ellipsis">
      Preparation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inspecting-synop-data-and-bufr-conversion" class="md-nav__link">
    <span class="md-ellipsis">
      Inspecting SYNOP data and BUFR conversion
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Inspecting SYNOP data and BUFR conversion">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exercise-1-the-basics" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 1 - the basics
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-2-converting-your-first-message" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 2 - converting your first message
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-3-understanding-the-station-list" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 3 - understanding the station list
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-4-debugging" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 4 - debugging
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#housekeeping" class="md-nav__link">
    <span class="md-ellipsis">
      Housekeeping
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../converting-csv-data-to-bufr/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Converting CSV data to BUFR
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../bufr-command-line-tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    BUFR command line tools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../automating-data-ingestion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Automating data ingestion
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../downloading-and-finding-data-from-wis2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Downloading and finding data from WIS2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../querying-data-using-the-wis2box-api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Querying data using the wis2box API
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Cheatsheets
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Cheatsheets
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/linux/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linux
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/yaml/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    YAML
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/wis2box/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    WIS2 in a box
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparation" class="md-nav__link">
    <span class="md-ellipsis">
      Preparation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inspecting-synop-data-and-bufr-conversion" class="md-nav__link">
    <span class="md-ellipsis">
      Inspecting SYNOP data and BUFR conversion
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Inspecting SYNOP data and BUFR conversion">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exercise-1-the-basics" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 1 - the basics
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-2-converting-your-first-message" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 2 - converting your first message
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-3-understanding-the-station-list" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 3 - understanding the station list
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-4-debugging" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 4 - debugging
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#housekeeping" class="md-nav__link">
    <span class="md-ellipsis">
      Housekeeping
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="converting-synop-data-to-bufr">Converting SYNOP data to BUFR</h1>
<div class="admonition abstract">
<p class="admonition-title">Learning outcomes</p>
<p>By the end of this practical session, you will be able to:</p>
<ul>
<li>submit valid FM-12 SYNOP bulletins via the wis2box web application for conversion to BUFR and exchange over the WIS2.0</li>
<li>validate, diagnose and fix simple coding errors in an FM-12 SYNOP bulletin prior to format conversion and exchange</li>
<li>ensure that the required station metadata is available in the wis2box</li>
<li>confirm and inspect successfully converted bulletins</li>
</ul>
</div>
<h2 id="introduction">Introduction</h2>
<p>Surface weather reports from land surface stations have historically been reported hourly or at the main 
(00, 06, 12 and 18 UTC) and intermediate (03, 09, 15, 21 UTC) synoptic hours. Prior to the migration
to BUFR these reports were encoded in the plain text FM-12 SYNOP code form. Whilst the migration to BUFR
was scheduled to be complete by 2012 a large number of reports are still exchanged in the legacy 
FM-12 SYNOP format. Further information on the FM-12 SYNOP format can be found in the WMO Manual on Codes, 
Volume I.1 (WMO-No. 306, Volume I.1).</p>
<p><a href="https://library.wmo.int/records/item/35713-manual-on-codes-international-codes-volume-i-1">WMO Manual on Codes, Volume I.1</a></p>
<p>To aid with completing migration to BUFR some tools have been developed for
encoding FM-12 SYNOP reports to BUFR, in this session you will learn how to use these tools as well
as the relationship between the information contained in the FM-12 SYNOP reports and BUFR messages.</p>
<h2 id="preparation">Preparation</h2>
<div class="admonition warning">
<p class="admonition-title">Prerequisites</p>
<ul>
<li>Ensure that your wis2box has been configured and started.</li>
<li>Confirm the status by visiting the wis2box API (<code>http://&lt;your-host-name&gt;/oapi</code>) and verifying that the API is running.</li>
<li>Make sure that you have MQTT Explorer open and connected to your broker.</li>
</ul>
</div>
<p>In order to submit data to be processed in the wis2box-webapp you will need an auth token for "processes/wis2box".</p>
<p>You can generate this token by logging in to the wis2box management container and using the <code>wis2box auth add-token</code> command:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/wis2box-1.0b5
python3<span class="w"> </span>wis2box-ctl.py<span class="w"> </span>login
wis2box<span class="w"> </span>auth<span class="w"> </span>add-token<span class="w"> </span>--path<span class="w"> </span>processes/wis2box
</code></pre></div>
<p>Or if you want to define your own token:</p>
<div class="highlight"><pre><span></span><code>wis2box<span class="w"> </span>auth<span class="w"> </span>add-token<span class="w"> </span>--path<span class="w"> </span>processes/wis2box<span class="w"> </span>DataIsMagic
</code></pre></div>
<p>Please record the token that is generated, you will need this later in the session.</p>
<p>For practical purposes the exercises in this session use data from Romania, import the station <code>0-20000-0-15015</code> into your station list and associate it with the topic for your "Surface weather observations collection". You can remove this station at the end of the session.</p>
<p>If you have forgotten your auth token for "collections/stations" you can create a new one with:</p>
<div class="highlight"><pre><span></span><code>wis2box<span class="w"> </span>auth<span class="w"> </span>add-token<span class="w"> </span>--path<span class="w"> </span>collections/stations
</code></pre></div>
<h2 id="inspecting-synop-data-and-bufr-conversion">Inspecting SYNOP data and BUFR conversion</h2>
<h3 id="exercise-1-the-basics">Exercise 1 - the basics</h3>
<p>Review the FM-12 SYNOP message below:</p>
<div class="highlight"><pre><span></span><code>AAXX 21121
15015 02999 02501 10103 21090 39765 42952 57020 60001=
</code></pre></div>
<p>Identify the key components of the FM-12 SYNOP message and confirm that the station(s) is (are) registered
within the wis2box. The station(s) should be discoverable via the station list page
(<code>http://&lt;your-host-name&gt;/wis2box-webapp/station</code>) or via the API directly
(<code>http://&lt;your-host-name&gt;/oapi/collections/stations</code>). </p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>The traditional station identifier (2 digit block number and 3 digit station number) are included
in the FM-12 SYNOP report. These can be used to find the station.</p>
</div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>What is the traditional station identifier of the station included in the message and 
where is the station located?</p>
</div>
<details class="success">
<summary>Click to reveal answer</summary>
<p>The five digit group, <code>15015</code>, gives the 5 digit traditional station identifier. In 
this case for the station "OCNA SUGATAG" located in Romania.</p>
</details>
<p>Identify the number of weather reports in the message.</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>How many weather reports are in the message?</p>
</div>
<details class="success">
<summary>Click to reveal answer</summary>
<p>One, the report contains a single message.</p>
<p>The first line <code>AAXX 21121</code> indicates that this is an FM-12 SYNOP message (<code>AAXX</code>), 
the 2112 indicates that the weather observation was made on the 21st day of the month at 12 UTC.
The final digit of the row, <code>1</code>, indicates the source and units of the wind speed. The second line
contains a single weather report, beginning with the 5 digit group <code>15015</code> and ending with 
the <code>=</code> symbol.</p>
</details>
<h3 id="exercise-2-converting-your-first-message">Exercise 2 - converting your first message</h3>
<p>Now that you have reviewed the message, you are ready to convert the data to BUFR.</p>
<p>Copy the message you have just reviewed:</p>
<div class="highlight"><pre><span></span><code>AAXX 21121
15015 02999 02501 10103 21090 39765 42952 57020 60001=
</code></pre></div>
<p>Open the wis2box web application and navigate to the synop2bufr page using the left navigation drawer and proceed as follows:</p>
<ul>
<li>Paste the content you have copied in the text entry box.</li>
<li>Select the month and year using the date picker, assume the current month for this exercise.</li>
<li>Select a topic from the drop down menu (the options are based on the metadata configured in the wis2box)</li>
<li>Enter the "processes/wis2box" auth token you generated earlier</li>
<li>Ensure "Publish on WIS2" is toggled ON</li>
<li>Click "SUBMIT"</li>
</ul>
<p><center><img alt="Dialog showing synop2bufr page, including toggle button" src="../../assets/img/synop2bufr-toggle.png"></center></p>
<p>Click submit. The data will now be converted to BUFR and the result returned to the web application.</p>
<p>Click on "Output BUFR files" to see a list of the files that have been generated.</p>
<details class="tip">
<summary>Tip</summary>
<p>The result section of the page should show a single converted BUFR message with zero warnings 
or errors. The download button allows the BUFR data to be downloaded directly to your computer.
Click the down arrow / chevron to reveal download and inspect buttons. 
The inspect button runs a process to convert and extract the data from BUFR.</p>
<p><center><img alt="Dialog showing result of successfully submitting a message"
     src="../../assets/img/synop2bufr-ex2-success.png"></center></p>
</details>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>The FM-12 SYNOP format does not include the station location, elevation or barometer height. 
Confirm that these are in the output BUFR data, where do these come from?</p>
</div>
<details class="success">
<summary>Click to reveal answer</summary>
<p>Clicking the inspect button should bring up a dialog like that shown below.</p>
<p><center><img alt="Results of the inspect button showing the basic station metadata, the station location and the observed properties"
     src="../../assets/img/synop2bufr-ex2.png"></center></p>
<p>This includes the station location shown on a map and basic metadata, as well as the observations in the message.</p>
<p>As part of the transformation from FM-12 SYNOP to BUFR, additional metadata was added to the BUFR file.</p>
<p>The BUFR file can also be inspected by downloading the file and validating using a tool such as as the ECMWF ecCodes BUFR validator.</p>
</details>
<p>As a final step navigate to the monitoring page from the left menu and confirm that the data have been published.</p>
<p><center><img alt="Image showing monitoring tab in on the left menu" src="../../assets/img/csv2bufr-monitoring.png"/></center></p>
<p><center><img alt="Image showing monitoring page and published data" src="../../assets/img/synop2bufr-monitoring.png"/></center></p>
<p>You should also be able to see these notifications in MQTT Explorer.</p>
<h3 id="exercise-3-understanding-the-station-list">Exercise 3 - understanding the station list</h3>
<p>For this next exercise you will convert a file containing multiple reports, see the data below:</p>
<div class="highlight"><pre><span></span><code>AAXX 21121
15015 02999 02501 10103 21090 39765 42952 57020 60001=
15020 02997 23104 10130 21075 30177 40377 58020 60001 81041=
15090 02997 53102 10139 21075 30271 40364 58031 60001 82046=
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Based on the prior exercise, look at the FM-12 SYNOP message and predict how many output BUFR
messages will be generated. </p>
<p>Now copy paste this message into SYNOP form and submit the data.</p>
<p>Did the number of messages generated match your expectation and if not, why not?</p>
</div>
<details class="warning">
<summary>Click to reveal answer</summary>
<p>You might have expected three BUFR messages to be generated, one for each weather report. However, instead you got 2 warnings and only one BUFR file.</p>
<p>In order for a weather report to be converted to BUFR the basic metadata contained in the 
station list is required. Whilst the above example includes three weather reports, two of the
three stations reporting were not registered in your wis2box. </p>
<p>As a result, only one of the three weather report resulted in a BUFR file being generated and WIS2 notification being published. The other two weather reports were ignored and warnings were generated.</p>
</details>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>Take note of the relationship between the WIGOS Identifier and the traditional station 
identifier included in the BUFR output. In many cases, for stations listed in WMO-No. 9
Volume A at the time of migrating to WIGOS station identifiers, the WIGOS station
identifier is given by the traditional station identifier with <code>0-20000-0</code> prepended,
e.g. <code>15015</code> has become <code>0-20000-0-15015</code>.</p>
</div>
<p>Using the station list page from the web application import the missing stations from <a href="https://oscar.wmo.int/surface/">OSCAR/Surface</a> 
into the wis2box and repeat the exercise. </p>
<p>Three BUFR files should be generated and there should be no warnings or errors listed in the web application. </p>
<p>In addition to the basic station information, additional metadata such as the station elevation above sea level and the
barometer height above sea level are required for encoding to BUFR. The fields are included in the station list and station editor pages.</p>
<h3 id="exercise-4-debugging">Exercise 4 - debugging</h3>
<p>In this final exercise you will identify and correct two of the most common problems encountered when
using this tool to convert FM-12 SYNOP to BUFR. </p>
<p>Example data is shown in the box below, examine the data and try and resolve any issues that there 
may be prior to submitting the data through the web application. </p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>You can edit the data in the entry box on the web application page. If you miss any issues 
these should be detected and highlighted as a warning or error once the submit button 
has been clicked.</p>
</div>
<div class="highlight"><pre><span></span><code>AAXX 21121
15015 02999 02501 10103 21090 39765 42952 57020 60001
15020 02997 23104 10130 21075 30177 40377 58020 60001 81041=
15090 02997 53102 10139 21075 30271 40364 58031 60001 82046=
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>What issues did you expect to encounter when converting the data to BUFR and how did you
overcome them? Where there any issues you were not expecting?</p>
</div>
<details class="success">
<summary>Click to reveal answer</summary>
<p>In this first example the "end of text" symbol (=), or record delimiter, is missing between the
first and second weather reports. Consequently, lines 2 and 3 are treated as a single report, 
leading to errors in the parsing of the message.</p>
</details>
<p>The second example below contains several common issues found in FM-12 SYNOP reports. Examine the
data and try to identify the issues and then submit the corrected data through the web application.</p>
<div class="highlight"><pre><span></span><code>AAXX 21121
15020 02997 23104 10/30 21075 30177 40377 580200 60001 81041=
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>What issues did you find and how did you resolve these?</p>
</div>
<details class="success">
<summary>Click to reveal answer</summary>
<p>There are two issues in the weather report. </p>
<p>The first, in the signed air temperature group, has the tens character set to missing (/), 
leading to an invalid group. In this example we know that the temperature is 13.0 degrees 
Celsius (from the above examples) and so this issue can be corrected. Operationally, the 
correct value would need to be confirmed with the observer.</p>
<p>The second issue occurs in group 5 where there is an additional character, with the final 
character duplicated. This issue can be fixed by removing the extra character.</p>
</details>
<h2 id="housekeeping">Housekeeping</h2>
<p>During the exercises in this session you will have imported several files into your station list. Navigate to the 
station list page and click the trash can icons to delete the stations. You may need to refresh the page to have
the stations removed from the list after deleting.</p>
<p><center><img alt="Station metadata viewer"
         src="../../assets/img/synop2bufr-trash.png" width="600"></center></p>
<p>You can also delete the file used in the final exercise as this will no longer be required.</p>
<h2 id="conclusion">Conclusion</h2>
<div class="admonition success">
<p class="admonition-title">Congratulations!</p>
<p>In this practical session, you learned:</p>
<ul>
<li>how to submit a FM-12 SYNOP report through the web-app;</li>
<li>how to diagnose and correct simple errors in an FM-12 SYNOP report;</li>
<li>the importance of registering stations in the wis2box (and OSCAR/Surface);</li>
<li>and the use of the inspect button to view the content of BUFR data.</li>
</ul>
</div>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2023 World Meteorological Organization
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.indexes", "content.code.copy"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.d7c377c4.min.js"></script>
      
    
  </body>
</html>